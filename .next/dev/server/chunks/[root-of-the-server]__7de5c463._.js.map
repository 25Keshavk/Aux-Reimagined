{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/keshuk/Desktop/Aux-Reimagined/app/api/apple-music/search/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\n\nexport const runtime = \"nodejs\";\n\nexport async function GET(req: NextRequest) {\n  const q = req.nextUrl.searchParams.get(\"q\") ?? \"\";\n  const storefront = req.nextUrl.searchParams.get(\"storefront\") ?? \"us\";\n  if (!q.trim()) {\n    return NextResponse.json({ results: { songs: { data: [] } } });\n  }\n\n  const origin = process.env.APPLE_MUSIC_ORIGIN; // e.g. http://localhost:3000\n\n  const dtRes = await fetch(new URL(\"/api/apple-music/developer-token\", req.url), { cache: \"no-store\" });\n  const { token: developerToken } = await dtRes.json();\n\n  const url = `https://api.music.apple.com/v1/catalog/${storefront}/search?term=${encodeURIComponent(\n    q\n  )}&types=songs&limit=10`;\n\n  const headers: Record<string, string> = {\n    Authorization: `Bearer ${developerToken}`,\n  };\n  if (origin) headers[\"Origin\"] = origin;\n\n  const apiRes = await fetch(url, { headers });\n  const body = await apiRes.text();\n\n  return new NextResponse(body, {\n    status: apiRes.status,\n    headers: { \"Content-Type\": \"application/json\" },\n  });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,UAAU;AAEhB,eAAe,IAAI,GAAgB;IACxC,MAAM,IAAI,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ;IAC/C,MAAM,aAAa,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,iBAAiB;IACjE,IAAI,CAAC,EAAE,IAAI,IAAI;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;gBAAE,OAAO;oBAAE,MAAM,EAAE;gBAAC;YAAE;QAAE;IAC9D;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB,EAAE,6BAA6B;IAE5E,MAAM,QAAQ,MAAM,MAAM,IAAI,IAAI,oCAAoC,IAAI,GAAG,GAAG;QAAE,OAAO;IAAW;IACpG,MAAM,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,MAAM,IAAI;IAElD,MAAM,MAAM,CAAC,uCAAuC,EAAE,WAAW,aAAa,EAAE,mBAC9E,GACA,qBAAqB,CAAC;IAExB,MAAM,UAAkC;QACtC,eAAe,CAAC,OAAO,EAAE,gBAAgB;IAC3C;IACA,IAAI,QAAQ,OAAO,CAAC,SAAS,GAAG;IAEhC,MAAM,SAAS,MAAM,MAAM,KAAK;QAAE;IAAQ;IAC1C,MAAM,OAAO,MAAM,OAAO,IAAI;IAE9B,OAAO,IAAI,gJAAY,CAAC,MAAM;QAC5B,QAAQ,OAAO,MAAM;QACrB,SAAS;YAAE,gBAAgB;QAAmB;IAChD;AACF"}}]
}